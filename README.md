# Office Space Manager

## Description

This web application provides a visual representation of office space occupancy for different floors (specifically the 3rd and 4th floors based on the current data). It uses D3.js to draw a floor plan where each office is represented as a rectangle. Users can click on an office to view current occupants, add new occupants, edit existing occupant details (including temporary status and associated dates), or remove occupants. The data is served by a Python Flask backend connected to an SQLite database.

## Features

* **Visual Floor Plan:** Displays offices for the selected floor using SVG generated by D3.js.
* **Occupancy Status:** Offices visually indicate if they are occupied.
* **Occupant Details:** Shows the name(s) of occupants within each office rectangle. Temporary occupants can display start/end dates.
* **Interactive Editing:** Click an office to open a popup window.
    * View a list of current occupants.
    * Edit an existing occupant's name, temporary status, start date, and end date.
    * Add a new occupant to the selected office.
    * Delete an occupant from the office.
* **Floor Toggling:** Buttons allow switching the view between the 3rd and 4th floors.
* **Data Persistence:** Occupancy information is stored in an SQLite database (`mydatabase.db`).
* **Data Migration:** Includes a script (`migrate_csv.py`) to populate the database from a CSV file (`assignments_dates.csv`).

## Technology Stack

* **Backend:** Python, Flask
* **Database:** SQLite
* **Frontend:** HTML, CSS[cite: 2], JavaScript
* **Visualization:** D3.js (v7)

## File Structure

```
office-space/
├── app.py                   # Flask application: backend logic, API routes, DB connection
├── migrate_csv.py           # Script to load data from CSV into the database
├── office_space.js          # Frontend JavaScript: D3 visualization, API calls, popup logic
├── styles.css               # CSS rules for styling the HTML page and SVG elements 
├── templates/
│   └── office_space.html    # Main HTML file for the user interface
├── assignments_dates.csv    # Example CSV data file with office assignments 
├── assignments_dates.json   # JSON version of the assignment data 
└── mydatabase.db            # SQLite database file (created after running init-db)
```

# Office Space Manager

## Description

This web application provides a visual representation of office space occupancy for different floors (specifically the 3rd and 4th floors based on the current data). It uses D3.js to draw a floor plan where each office is represented as a rectangle. Users can click on an office to view current occupants, add new occupants, edit existing occupant details (including temporary status and associated dates), or remove occupants. The data is served by a Python Flask backend connected to an SQLite database.

## Features

* **Visual Floor Plan:** Displays offices for the selected floor using SVG generated by D3.js.
* **Occupancy Status:** Offices visually indicate if they are occupied.
* **Occupant Details:** Shows the name(s) of occupants within each office rectangle. Temporary occupants can display start/end dates.
* **Interactive Editing:** Click an office to open a popup window.
    * View a list of current occupants.
    * Edit an existing occupant's name, temporary status, start date, and end date.
    * Add a new occupant to the selected office.
    * Delete an occupant from the office.
* **Floor Toggling:** Buttons allow switching the view between the 3rd and 4th floors.
* **Data Persistence:** Occupancy information is stored in an SQLite database (`mydatabase.db`).
* **Data Migration:** Includes a script (`migrate_csv.py`) to populate the database from a CSV file (`assignments_dates.csv`).

## Technology Stack

* **Backend:** Python, Flask
* **Database:** SQLite
* **Frontend:** HTML, CSS, JavaScript
* **Visualization:** D3.js (v7)

## File Structure

```text
office-space/
├── app.py
├── assignments_dates.csv
├── assignments_dates.json
├── migrate_csv.py
├── mydatabase.db
├── office_space.js
├── styles.css
└── templates/
    └── office_space.html
```


## Setup and Running

1.  **Prerequisites:**
    * Python 3.x
    * Flask (`pip install Flask`)

2.  **Initialize Database:**
    * Open your terminal in the `office-space` directory.
    * Run the Flask command to create the database schema:
        ```bash
        flask init-db
        ```
    * This will create the `mydatabase.db` file with the `office_assignments` table.

3.  **Migrate Initial Data:**
    * Run the migration script, providing the path to the CSV file:
        ```bash
        python migrate_csv.py assignments_dates.csv
        ```
    * This will populate the `office_assignments` table with data from the CSV.

4.  **Run the Application:**
    * Start the Flask development server:
        ```bash
        flask run --host=0.0.0.0 --port=4999
        ```
        *(Note: `app.py` specifies port 4999 and host 0.0.0.0)*
    * Open your web browser and navigate to `http://127.0.0.1:4999` or `http://<your-local-ip>:4999`.

## Usage

* Use the "3rd Floor" and "4th Floor" buttons to switch between floor plans.
* Click on any office rectangle to open the edit popup.
* Inside the popup:
    * View the list of current occupants for that office.
    * Click "Edit" next to an occupant to modify their details.
    * Click "Add New Occupant" to add someone new.
    * Use the form fields (Name, Temporary checkbox, Start/End Dates) to enter or update information.
    * Click "Save Occupant" or "Save Changes" to commit the edits.
    * Click "Delete Occupant" (when editing) to remove the selected person.
    * Click "Cancel Edit" to discard changes in the form.
    * Click "Close" or click the backdrop to close the popup.

## Data

* The initial office assignment data is expected in CSV format (see `assignments_dates.csv` for an example). The columns used are `Room Number`, `Full Name`, `Appointment Type`, `Start Date`, and `End Date`.
* This data is migrated into the `office_assignments` table in the `mydatabase.db` SQLite database.
* The application interacts with this database via API endpoints defined in `app.py`.
